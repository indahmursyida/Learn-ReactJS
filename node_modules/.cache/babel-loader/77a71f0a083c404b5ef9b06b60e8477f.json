{"ast":null,"code":"var _jsxFileName = \"D:\\\\im-sanbercode-reactjs-batch-22\\\\Quiz-3\\\\src\\\\CRUD\\\\DaftarBukuForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { DaftarBukuContext } from \"./DaftarBukuContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst DaftarBukuForm = () => {\n  _s();\n\n  const [daftarBuku, setDaftarBuku] = useContext(DaftarBukuContext);\n  const [input, setInput] = useState({\n    id: \"\",\n    title: \"\",\n    description: \"\",\n    review: \"\",\n    release_year: 2020,\n    totalPage: 0,\n    price: 0,\n    image_url: \"\"\n  });\n  useEffect(() => {\n    if (daftarBuku.statusForm === \"changeToEdit\") {\n      // cara 1 ambil data dari daftarBuku yg di inisialisasi di awal (bukan api baru)\n      // let dataBuku = daftarBuku.lists.find(x=> x.id === daftarBuku.selectedId)\n      // setInput({name: dataBuku.name, price: dataBuku.price, weight: dataBuku.weight})\n      // setDaftarBuku({...daftarBuku, statusForm: \"edit\"})\n      // cara 2 ambil data dari api baru                  \n      axios.get(`http://backendexample.sanbercloud.com/api/books/${daftarBuku.selectedId}`).then(res => {\n        let dataBuku = res.data;\n        setInput({\n          id: dataBuku.id,\n          title: dataBuku.title,\n          description: dataBuku.description,\n          review: dataBuku.review,\n          release_year: dataBuku.release_year,\n          totalPage: dataBuku.totalPage,\n          price: dataBuku.price,\n          image_url: dataBuku.image_url\n        });\n        setDaftarBuku({ ...daftarBuku,\n          statusForm: \"edit\"\n        });\n      });\n    }\n  }, [daftarBuku, setDaftarBuku]);\n\n  const handleChange = event => {\n    let typeOfInput = event.target.name;\n\n    switch (typeOfInput) {\n      case \"title\":\n        {\n          setInput({ ...input,\n            title: event.target.value\n          });\n          break;\n        }\n\n      case \"description\":\n        {\n          setInput({ ...input,\n            description: event.target.value\n          });\n          break;\n        }\n\n      case \"review\":\n        {\n          setInput({ ...input,\n            review: event.target.value\n          });\n          break;\n        }\n\n      case \"release_year\":\n        {\n          setInput({ ...input,\n            release_year: event.target.value\n          });\n          break;\n        }\n\n      case \"totalPage\":\n        {\n          setInput({ ...input,\n            totalPage: event.target.value\n          });\n          break;\n        }\n\n      case \"price\":\n        {\n          setInput({ ...input,\n            price: event.target.value\n          });\n          break;\n        }\n\n      case \"image_url\":\n        {\n          setInput({ ...input,\n            image_url: event.target.value\n          });\n          break;\n        }\n\n      default:\n        {\n          break;\n        }\n    }\n  };\n\n  const handleSubmit = event => {\n    // menahan submit\n    event.preventDefault();\n    let name = input.name;\n    let price = input.price.toString();\n\n    if (daftarBuku.statusForm === \"create\") {\n      axios.post(`http://backendexample.sanbercloud.com/api/books`, {\n        title: input.title,\n        description: input.description,\n        review: input.review,\n        release_year: input.release_year,\n        totalPage: input.totalPage,\n        price: input.price,\n        image_url: input.image_url\n      }).then(res => {\n        setDaftarBuku({\n          statusForm: \"create\",\n          selectedId: 0,\n          lists: [...daftarBuku.lists, {\n            id: res.data.id,\n            title: input.title,\n            description: input.description,\n            review: input.review,\n            release_year: input.release_year,\n            totalPage: input.totalPage,\n            price: input.price,\n            image_url: input.image_url\n          }]\n        });\n      });\n    } else if (daftarBuku.statusForm === \"edit\") {\n      axios.put(`http://backendexample.sanbercloud.com/api/books/${daftarBuku.selectedId}`, {\n        name,\n        price,\n        weight: input.weight\n      }).then(() => {\n        let dataBuku = daftarBuku.lists.find(el => el.id === daftarBuku.selectedId);\n        dataBuku.title = input.title;\n        dataBuku.description = input.description;\n        dataBuku.review = input.review, dataBuku.release_year = input.release_year;\n        dataBuku.totalPage = input.totalPage;\n        dataBuku.price = input.price;\n        dataBuku.image_url = input.image_url;\n        setDaftarBuku({\n          statusForm: \"create\",\n          selectedId: 0,\n          lists: [...daftarBuku.lists]\n        });\n      });\n    }\n\n    setInput({\n      id: \"\",\n      title: \"\",\n      description: \"\",\n      review: \"\",\n      release_year: 2020,\n      totalPage: 0,\n      price: 0,\n      image_url: \"\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Form Daftar Harga Buku\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"50%\",\n        margin: \"0 auto\",\n        display: \"block\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: \"1px solid #aaa\",\n          padding: \"20px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              float: \"left\"\n            },\n            children: \"Nama:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              float: \"right\"\n            },\n            type: \"text\",\n            name: \"name\",\n            value: input.name,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              float: \"left\"\n            },\n            children: \"Harga:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              float: \"right\"\n            },\n            type: \"text\",\n            name: \"price\",\n            value: input.price,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              float: \"left\"\n            },\n            children: \"Berat (dalam gram):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              float: \"right\"\n            },\n            type: \"number\",\n            name: \"weight\",\n            value: input.weight,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\",\n              paddingBottom: \"20px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                float: \"right\"\n              },\n              children: \"submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(DaftarBukuForm, \"GmT6N78WzPWPwbjjdMvPhYVI1Zw=\");\n\n_c = DaftarBukuForm;\nexport default DaftarBukuForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"DaftarBukuForm\");","map":{"version":3,"sources":["D:/im-sanbercode-reactjs-batch-22/Quiz-3/src/CRUD/DaftarBukuForm.js"],"names":["React","useContext","useState","useEffect","axios","DaftarBukuContext","DaftarBukuForm","daftarBuku","setDaftarBuku","input","setInput","id","title","description","review","release_year","totalPage","price","image_url","statusForm","get","selectedId","then","res","dataBuku","data","handleChange","event","typeOfInput","target","name","value","handleSubmit","preventDefault","toString","post","lists","put","weight","find","el","width","margin","display","border","padding","float","paddingBottom"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from \"react\"\nimport axios from \"axios\"\nimport {DaftarBukuContext} from \"./DaftarBukuContext\"\n\nconst DaftarBukuForm = () =>{\n  const [daftarBuku, setDaftarBuku] = useContext(DaftarBukuContext)\n  const [input, setInput] = useState({id: \"\",\n    title: \"\", \n    description: \"\", \n    review: \"\",\n    release_year: 2020,\n    totalPage: 0,\n    price: 0,\n    image_url: \"\" })\n\n  useEffect(()=>{\n    if (daftarBuku.statusForm === \"changeToEdit\"){\n      // cara 1 ambil data dari daftarBuku yg di inisialisasi di awal (bukan api baru)\n      // let dataBuku = daftarBuku.lists.find(x=> x.id === daftarBuku.selectedId)\n      // setInput({name: dataBuku.name, price: dataBuku.price, weight: dataBuku.weight})\n      // setDaftarBuku({...daftarBuku, statusForm: \"edit\"})\n      \n      // cara 2 ambil data dari api baru                  \n      axios.get(`http://backendexample.sanbercloud.com/api/books/${daftarBuku.selectedId}`)\n      .then(res => {\n        let dataBuku = res.data\n        setInput({id: dataBuku.id,\n          title: dataBuku.title, \n          description: dataBuku.description, \n          review: dataBuku.review,\n          release_year: dataBuku.release_year,\n          totalPage: dataBuku.totalPage,\n          price: dataBuku.price,\n          image_url: dataBuku.image_url })\n        setDaftarBuku({...daftarBuku, statusForm: \"edit\"})\n      })\n      \n    }\n  },[daftarBuku, setDaftarBuku])\n\n  const handleChange = (event) =>{\n    let typeOfInput = event.target.name\n\n    switch (typeOfInput){\n      case \"title\":\n      {\n        setInput({...input, title: event.target.value});\n        break\n      }\n      case \"description\":\n      {\n        setInput({...input, description: event.target.value});\n        break\n      }\n      case \"review\":\n      {\n        setInput({...input, review: event.target.value});\n          break\n      }\n      case \"release_year\":\n      {\n        setInput({...input, release_year: event.target.value});\n          break\n      }\n      case \"totalPage\":\n      {\n        setInput({...input, totalPage: event.target.value});\n          break\n      }\n      case \"price\":\n      {\n        setInput({...input, price: event.target.value});\n          break\n      }\n      case \"image_url\":\n      {\n        setInput({...input, image_url: event.target.value});\n          break\n      }\n    default:\n      {break;}\n    }\n  }\n  \n  const handleSubmit = (event) =>{\n    // menahan submit\n    event.preventDefault()\n\n    let name = input.name\n    let price = input.price.toString()\n    \n\n    if (daftarBuku.statusForm === \"create\"){        \n      axios.post(`http://backendexample.sanbercloud.com/api/books`, {title: input.title, \n      description: input.description, \n      review: input.review,\n      release_year: input.release_year,\n      totalPage: input.totalPage,\n      price: input.price,\n      image_url: input.image_url})\n      .then(res => {\n          setDaftarBuku(\n            {statusForm: \"create\", selectedId: 0,\n            lists: [\n              ...daftarBuku.lists, \n              { id: res.data.id, \n                title: input.title, \n                description: input.description, \n                review: input.review,\n                release_year: input.release_year,\n                totalPage: input.totalPage,\n                price: input.price,\n                image_url: input.image_url\n              }]\n            })\n      })\n    }else if(daftarBuku.statusForm === \"edit\"){\n      axios.put(`http://backendexample.sanbercloud.com/api/books/${daftarBuku.selectedId}`, {name, price, weight: input.weight})\n      .then(() => {\n          let dataBuku = daftarBuku.lists.find(el=> el.id === daftarBuku.selectedId)\n          dataBuku.title = input.title\n          dataBuku.description = input.description\n          dataBuku.review = input.review,\n          dataBuku.release_year = input.release_year\n          dataBuku.totalPage = input.totalPage\n          dataBuku.price = input.price\n          dataBuku.image_url = input.image_url\n          setDaftarBuku({statusForm: \"create\", selectedId: 0, lists: [...daftarBuku.lists]})\n      })\n    }\n\n    setInput({id: \"\",\n    title: \"\", \n    description: \"\", \n    review: \"\",\n    release_year: 2020,\n    totalPage: 0,\n    price: 0,\n    image_url: \"\"})\n\n  }\n  return(\n    <>\n      <h1>Form Daftar Harga Buku</h1>\n\n      <div style={{width: \"50%\", margin: \"0 auto\", display: \"block\"}}>\n        <div style={{border: \"1px solid #aaa\", padding: \"20px\"}}>\n          <form onSubmit={handleSubmit}>\n            <label style={{float: \"left\"}}>\n              Nama:\n            </label>\n            <input style={{float: \"right\"}} type=\"text\" name=\"name\" value={input.name} onChange={handleChange}/>\n            <br/>\n            <br/>\n            <label style={{float: \"left\"}}>\n              Harga:\n            </label>\n            <input style={{float: \"right\"}} type=\"text\" name=\"price\" value={input.price} onChange={handleChange}/>\n            <br/>\n            <br/>\n            <label style={{float: \"left\"}}>\n              Berat (dalam gram):\n            </label>\n            <input style={{float: \"right\"}} type=\"number\" name=\"weight\" value={input.weight} onChange={handleChange}/>\n            <br/>\n            <br/>\n            <div style={{width: \"100%\", paddingBottom: \"20px\"}}>\n              <button style={{ float: \"right\"}}>submit</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default DaftarBukuForm"]},"metadata":{},"sourceType":"module"}